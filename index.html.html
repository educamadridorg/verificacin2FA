<html>
<head>
<title>websita.html</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #d5b778;}
.s1 { color: #bcbec4;}
.s2 { color: #bababa;}
.s3 { color: #6aab73;}
.s4 { color: #7a7e85;}
.s5 { color: #cf8e6d;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
websita.html</font>
</center></td></tr></table>
<pre><span class="s0">&lt;!DOCTYPE </span><span class="s2">html</span><span class="s0">&gt;</span>
<span class="s0">&lt;html </span><span class="s2">lang</span><span class="s3">=&quot;es&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;head&gt;</span>
    <span class="s0">&lt;meta </span><span class="s2">charset</span><span class="s3">=&quot;UTF-8&quot;</span><span class="s0">&gt;</span>
    <span class="s0">&lt;meta </span><span class="s2">name</span><span class="s3">=&quot;viewport&quot; </span><span class="s2">content</span><span class="s3">=&quot;width=device-width, initial-scale=1.0&quot;</span><span class="s0">&gt;</span>
    <span class="s0">&lt;title&gt;</span><span class="s1">P谩gina de Inicio de Sesi贸n y Respuestas</span><span class="s0">&lt;/title&gt;</span>
    <span class="s0">&lt;link </span><span class="s2">rel</span><span class="s3">=&quot;stylesheet&quot; </span><span class="s2">href</span><span class="s3">=&quot;scratch.css&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;/head&gt;</span>
<span class="s0">&lt;body&gt;</span>
<span class="s0">&lt;img </span><span class="s2">src</span><span class="s3">=&quot;fondo.jpg&quot; </span><span class="s2">alt</span><span class="s3">=&quot;Logo&quot; </span><span class="s2">class</span><span class="s3">=&quot;logo&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;container&quot;</span><span class="s0">&gt;</span>
    <span class="s4">&lt;!-- Formulario de Inicio de Sesi贸n --&gt;</span>
    <span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;login-form&quot; </span><span class="s2">id</span><span class="s3">=&quot;loginForm&quot;</span><span class="s0">&gt;</span>
        <span class="s0">&lt;h2&gt;</span><span class="s1">Iniciar sesi贸n</span><span class="s0">&lt;/h2&gt;</span>
        <span class="s0">&lt;form </span><span class="s2">id</span><span class="s3">=&quot;login&quot;</span><span class="s0">&gt;</span>
            <span class="s0">&lt;input </span><span class="s2">type</span><span class="s3">=&quot;email&quot; </span><span class="s2">id</span><span class="s3">=&quot;email&quot; </span><span class="s2">placeholder</span><span class="s3">=&quot;Correo electr贸nico&quot; </span><span class="s2">required</span><span class="s0">&gt;</span>
            <span class="s0">&lt;input </span><span class="s2">type</span><span class="s3">=&quot;password&quot; </span><span class="s2">id</span><span class="s3">=&quot;password&quot; </span><span class="s2">placeholder</span><span class="s3">=&quot;Contrase帽a&quot; </span><span class="s2">required</span><span class="s0">&gt;</span>
            <span class="s0">&lt;button </span><span class="s2">type</span><span class="s3">=&quot;submit&quot;</span><span class="s0">&gt;</span><span class="s1">Acceder</span><span class="s0">&lt;/button&gt;</span>
        <span class="s0">&lt;/form&gt;</span>
    <span class="s0">&lt;/div&gt;</span>

    <span class="s4">&lt;!-- Formulario de Respuestas --&gt;</span>
    <span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;responses-form&quot; </span><span class="s2">id</span><span class="s3">=&quot;responsesForm&quot; </span><span class="s2">style</span><span class="s3">=&quot;</span><span class="s2">display</span><span class="s1">:</span><span class="s3">none</span><span class="s1">;</span><span class="s3">&quot;</span><span class="s0">&gt;</span>
        <span class="s0">&lt;h2&gt;</span><span class="s1">Formulario de Respuestas</span><span class="s0">&lt;/h2&gt;</span>
        <span class="s0">&lt;form </span><span class="s2">id</span><span class="s3">=&quot;responseForm&quot;</span><span class="s0">&gt;</span>
            <span class="s0">&lt;textarea </span><span class="s2">id</span><span class="s3">=&quot;userResponse&quot; </span><span class="s2">placeholder</span><span class="s3">=&quot;Escribe tu respuesta aqu铆&quot; </span><span class="s2">required</span><span class="s0">&gt;&lt;/textarea&gt;</span>
            <span class="s0">&lt;button </span><span class="s2">type</span><span class="s3">=&quot;submit&quot;</span><span class="s0">&gt;</span><span class="s1">Enviar Respuesta</span><span class="s0">&lt;/button&gt;</span>
        <span class="s0">&lt;/form&gt;</span>

        <span class="s0">&lt;h3&gt;</span><span class="s1">Tus Respuestas</span><span class="s0">&lt;/h3&gt;</span>
        <span class="s0">&lt;div </span><span class="s2">id</span><span class="s3">=&quot;responseContainer&quot;</span><span class="s0">&gt;&lt;/div&gt;</span>
        <span class="s0">&lt;button </span><span class="s2">id</span><span class="s3">=&quot;logout&quot;</span><span class="s0">&gt;</span><span class="s1">Cerrar Sesi贸n</span><span class="s0">&lt;/button&gt;</span>
    <span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;/div&gt;</span>

<span class="s0">&lt;script </span><span class="s2">type</span><span class="s3">=&quot;module&quot;</span><span class="s0">&gt;</span>
    <span class="s4">//  Importaci贸n de funciones de Firebase v9</span>
    <span class="s5">import </span><span class="s1">{ initializeApp } from </span><span class="s3">&quot;https://www.gstatic.com/firebasejs/11.3.0/firebase-app.js&quot;</span><span class="s1">;</span>
    <span class="s5">import </span><span class="s1">{ getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from </span><span class="s3">&quot;https://www.gstatic.com/firebasejs/11.3.0/firebase-auth.js&quot;</span><span class="s1">;</span>
    <span class="s5">import </span><span class="s1">{ getDatabase, ref, push, onValue } from </span><span class="s3">&quot;https://www.gstatic.com/firebasejs/11.3.0/firebase-database.js&quot;</span><span class="s1">;</span>

    <span class="s4">//  Configuraci贸n de Firebase</span>
    <span class="s5">const </span><span class="s1">firebaseConfig = {</span>
        <span class="s1">apiKey: </span><span class="s3">&quot;AIzaSyAw6_-fB9f3xi6feMwKnY6gejoOqXkvtCE&quot;</span><span class="s1">,</span>
        <span class="s1">authDomain: </span><span class="s3">&quot;web-inicio-sesion-c8e9f.firebaseapp.com&quot;</span><span class="s1">,</span>
        <span class="s1">databaseURL: </span><span class="s3">&quot;https://web-inicio-sesion-c8e9f-default-rtdb.europe-west1.firebasedatabase.app&quot;</span><span class="s1">,</span>
        <span class="s1">projectId: </span><span class="s3">&quot;web-inicio-sesion-c8e9f&quot;</span><span class="s1">,</span>
        <span class="s1">storageBucket: </span><span class="s3">&quot;web-inicio-sesion-c8e9f.firebasestorage.app&quot;</span><span class="s1">,</span>
        <span class="s1">messagingSenderId: </span><span class="s3">&quot;422022760273&quot;</span><span class="s1">,</span>
        <span class="s1">appId: </span><span class="s3">&quot;1:422022760273:web:7d356af281e92508b8b570&quot;</span><span class="s1">,</span>
        <span class="s1">measurmentId: </span><span class="s3">&quot;G-R4GHBN5WQT&quot;</span>
    <span class="s1">};</span>

    <span class="s4">// Inicializar Firebase</span>
    <span class="s5">const </span><span class="s1">app = initializeApp(firebaseConfig);</span>
    <span class="s5">const </span><span class="s1">auth = getAuth(app);</span>
    <span class="s5">const </span><span class="s1">db = getDatabase(app);</span>

    <span class="s4">//  Manejo de Inicio de Sesi贸n</span>
    <span class="s1">document.getElementById(</span><span class="s3">&quot;login&quot;</span><span class="s1">).addEventListener(</span><span class="s3">&quot;submit&quot;</span><span class="s1">, </span><span class="s5">function </span><span class="s1">(event) {</span>
        <span class="s1">event.preventDefault();</span>
        <span class="s5">let </span><span class="s1">email = document.getElementById(</span><span class="s3">&quot;email&quot;</span><span class="s1">).value;</span>
        <span class="s5">let </span><span class="s1">password = document.getElementById(</span><span class="s3">&quot;password&quot;</span><span class="s1">).value;</span>

        <span class="s1">signInWithEmailAndPassword(auth, email, password)</span>
            <span class="s1">.then(() =&gt; {</span>
                <span class="s1">document.getElementById(</span><span class="s3">&quot;loginForm&quot;</span><span class="s1">).style.display = </span><span class="s3">&quot;none&quot;</span><span class="s1">;</span>
                <span class="s1">document.getElementById(</span><span class="s3">&quot;responsesForm&quot;</span><span class="s1">).style.display = </span><span class="s3">&quot;block&quot;</span><span class="s1">;</span>
                <span class="s1">cargarRespuestas();</span>
            <span class="s1">})</span>
            <span class="s1">.catch(error =&gt; alert(</span><span class="s3">&quot;Error de autenticaci贸n: &quot; </span><span class="s1">+ error.message));</span>
    <span class="s1">});</span>

    <span class="s4">//  Manejo de Cierre de Sesi贸n</span>
    <span class="s1">document.getElementById(</span><span class="s3">&quot;logout&quot;</span><span class="s1">).addEventListener(</span><span class="s3">&quot;click&quot;</span><span class="s1">, </span><span class="s5">function </span><span class="s1">() {</span>
        <span class="s1">signOut(auth).then(() =&gt; {</span>
            <span class="s1">document.getElementById(</span><span class="s3">&quot;loginForm&quot;</span><span class="s1">).style.display = </span><span class="s3">&quot;block&quot;</span><span class="s1">;</span>
            <span class="s1">document.getElementById(</span><span class="s3">&quot;responsesForm&quot;</span><span class="s1">).style.display = </span><span class="s3">&quot;none&quot;</span><span class="s1">;</span>
        <span class="s1">});</span>
    <span class="s1">});</span>

    <span class="s4">//  Enviar Respuestas a Firebase</span>
    <span class="s1">document.getElementById(</span><span class="s3">&quot;responseForm&quot;</span><span class="s1">).addEventListener(</span><span class="s3">&quot;submit&quot;</span><span class="s1">, </span><span class="s5">function </span><span class="s1">(event) {</span>
        <span class="s1">event.preventDefault();</span>
        <span class="s5">let </span><span class="s1">respuesta = document.getElementById(</span><span class="s3">&quot;userResponse&quot;</span><span class="s1">).value;</span>
        <span class="s5">if </span><span class="s1">(!respuesta.trim()) </span><span class="s5">return</span><span class="s1">;</span>

        <span class="s1">push(ref(db, </span><span class="s3">&quot;respuestas&quot;</span><span class="s1">), {</span>
            <span class="s1">texto: respuesta,</span>
            <span class="s1">timestamp: Date.now()</span>
        <span class="s1">});</span>

        <span class="s1">document.getElementById(</span><span class="s3">&quot;userResponse&quot;</span><span class="s1">).value = </span><span class="s3">&quot;&quot;</span><span class="s1">; </span><span class="s4">// Limpiar el campo</span>
        <span class="s1">cargarRespuestas();</span>
    <span class="s1">});</span>

    <span class="s4">//  Cargar Respuestas (Solo visibles para el usuario autenticado)</span>
    <span class="s5">function </span><span class="s1">cargarRespuestas() {</span>
        <span class="s1">onValue(ref(db, </span><span class="s3">&quot;respuestas&quot;</span><span class="s1">), (snapshot) =&gt; {</span>
            <span class="s5">let </span><span class="s1">contenedor = document.getElementById(</span><span class="s3">&quot;responseContainer&quot;</span><span class="s1">);</span>
            <span class="s1">contenedor.innerHTML = </span><span class="s3">&quot;&quot;</span><span class="s1">;</span>

            <span class="s1">snapshot.forEach((childSnapshot) =&gt; {</span>
                <span class="s5">let </span><span class="s1">respuesta = childSnapshot.val().texto;</span>
                <span class="s5">let </span><span class="s1">div = document.createElement(</span><span class="s3">&quot;div&quot;</span><span class="s1">);</span>
                <span class="s1">div.className = </span><span class="s3">&quot;respuesta&quot;</span><span class="s1">;</span>
                <span class="s1">div.textContent = respuesta;</span>
                <span class="s1">contenedor.appendChild(div);</span>
            <span class="s1">});</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s4">//  Comprobar si el usuario ya est谩 autenticado</span>
    <span class="s1">onAuthStateChanged(auth, user =&gt; {</span>
        <span class="s5">if </span><span class="s1">(user) {</span>
            <span class="s1">document.getElementById(</span><span class="s3">&quot;loginForm&quot;</span><span class="s1">).style.display = </span><span class="s3">&quot;none&quot;</span><span class="s1">;</span>
            <span class="s1">document.getElementById(</span><span class="s3">&quot;responsesForm&quot;</span><span class="s1">).style.display = </span><span class="s3">&quot;block&quot;</span><span class="s1">;</span>
            <span class="s1">cargarRespuestas();</span>
        <span class="s1">}</span>
    <span class="s1">});</span>
<span class="s0">&lt;/script&gt;</span>
<span class="s0">&lt;/body&gt;</span>
<span class="s0">&lt;/html&gt;</span>
</pre>
</body>
</html>