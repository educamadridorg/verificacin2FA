<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página de Respuestas</title>
    <link rel="stylesheet" href="scratch.css"> <!-- Asegúrate de que tienes tu CSS aquí -->
</head>
<body>

    <!-- Formulario de Inicio de Sesión -->
    <div id="loginForm" class="form-container">
        <h2>Iniciar sesión</h2>
        <form id="login">
            <div class="input-group">
                <input type="email" id="username" placeholder="Correo electrónico" required>
            </div>
            <div class="input-group">
                <input type="password" id="password" placeholder="Contraseña" required>
            </div>
            <button type="submit" class="btn">Acceder</button>
        </form>
    </div>
    
    <!-- Formulario para la segunda pantalla (nuevo formulario de inicio de sesión y contraseña) -->
    <div id="secondLoginForm" class="form-container" style="display:none;">
        <h2>Iniciar sesión</h2>
        <form id="secondLogin">
            <div class="input-group">
                <input type="email" id="secondUsername" placeholder="Correo electrónico" required>
            </div>
            <div class="input-group">
                <input type="password" id="secondPassword" placeholder="Contraseña" required>
            </div>
            <button type="submit" class="btn">Acceder</button>
        </form>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Importar Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.0/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.3.0/firebase-auth.js";
        import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/11.3.0/firebase-database.js";

        document.addEventListener("DOMContentLoaded", () => {
            // Configuración de Firebase
            const firebaseConfig = {
                apiKey: "AIzaSyAw6_-fB9f3xi6feMwKnY6gejoOqXkvtCE",
                authDomain: "web-inicio-sesion-c8e9f.firebaseapp.com",
                databaseURL: "https://web-inicio-sesion-c8e9f-default-rtdb.europe-west1.firebasedatabase.app",
                projectId: "web-inicio-sesion-c8e9f",
                storageBucket: "web-inicio-sesion-c8e9f.firebasestorage.app",
                messagingSenderId: "422022760273",
                appId: "1:422022760273:web:20d8e37e976876f1b8b570",
                measurementId: "G-DXZ08ZYVHY"
            };

            // Inicializar Firebase
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            const db = getDatabase(app);

            // Elementos del DOM
            const loginForm = document.getElementById("loginForm");
            const secondLoginForm = document.getElementById("secondLoginForm");
            const secondLogin = document.getElementById("secondLogin");

            // Función para cargar respuestas desde Firebase
            function cargarRespuestas() {
                // Tu código para cargar respuestas (no se usará aquí si no es necesario)
            }

            // Manejo del inicio de sesión (primera pantalla)
            const login = document.getElementById("login");
            login.addEventListener("submit", (event) => {
                event.preventDefault();
                const email = document.getElementById("username").value;
                const password = document.getElementById("password").value;

                signInWithEmailAndPassword(auth, email, password)
                    .then(() => {
                        loginForm.style.display = "none"; // Ocultar el formulario de inicio de sesión
                        secondLoginForm.style.display = "block"; // Mostrar la segunda pantalla
                    })
                    .catch((error) => {
                        alert("Error de autenticación: " + error.message);
                    });
            });

            // Manejo de la segunda pantalla para el inicio de sesión y contraseña
            secondLogin.addEventListener("submit", (event) => {
                event.preventDefault();
                const secondEmail = document.getElementById("secondUsername").value;
                const secondPassword = document.getElementById("secondPassword").value;

                signInWithEmailAndPassword(auth, secondEmail, secondPassword)
                    .then(() => {
                        secondLoginForm.style.display = "none"; // Ocultar la segunda pantalla
                        alert("Inicio de sesión exitoso con la segunda cuenta");
                    })
                    .catch((error) => {
                        alert("Error al iniciar sesión con la segunda cuenta: " + error.message);
                    });
            });

            // Cerrar sesión
            logout.addEventListener("click", () => {
                signOut(auth).then(() => {
                    loginForm.style.display = "block"; // Mostrar el formulario de inicio de sesión
                    secondLoginForm.style.display = "none"; // Ocultar el formulario de segunda pantalla
                });
            });

            // Comprobar si el usuario está autenticado
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    loginForm.style.display = "none"; // Ocultar el formulario de inicio de sesión
                    secondLoginForm.style.display = "block"; // Mostrar el formulario de segunda pantalla
                } else {
                    loginForm.style.display = "block"; // Mostrar formulario de inicio de sesión si no está autenticado
                    secondLoginForm.style.display = "none"; // Ocultar formulario de segunda pantalla
                }
            });
        });
    </script>

</body>
</html>
